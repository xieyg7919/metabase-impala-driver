info:
  name: Metabase Impala Driver
  version: 1.0.0
  description: Allows Metabase to connect to Impala databases.
#contact-info:
#  name: Impala
#  address: https://github.com/ClickHouse/metabase-clickhouse-driver
driver:
  name: impala
  display-name: Apache Impala
  lazy-load: true
  parent: sql-jdbc
  connection-properties:
    - name: host
      display-name: Host
      default: localhost
      required: true
    - name:  port
      display-name: Port
      default: "21050"
      type: integer
      required: false
    - name: user
      display-name: Username
      required: false
    - name: password
      display-name: Password
      required: false
    - name: dbname
      display-name: Databases
      default: "default"
      helper-text: "To specify multiple databases, separate them by the space symbol. For example: default data logs."
    - name: scan-all-databases
      display-name: Scan all databases
      type: boolean
      default: "false"
      description: Scan all tables from all available ClickHouse databases except the system ones.

    - ssl
    - ssh-tunnel
    - advanced-options-start
#    - name: max-pool-size
#      display-name: "Max pool connections(default 100)"
#      placeholder: 100
#      type: integer
#      default: "100"
#      visible-if:
#        advanced-options: true
    - name: charset
      display-name: "Charset(default UTF-8)"
      placeholder: UTF-8
      default: "UTF-8"
      visible-if:
        advanced-options: true
    - name: query-timeout
      display-name: "Query timeout(Second,default 300)"
      placeholder: 300
      type: integer
      default: "300"
      visible-if:
        advanced-options: true
    - name: socket-timeout
      display-name: "Socket timeout(Second,default 30)"
      placeholder: 30
      default: "30"
      type: integer
      visible-if:
        advanced-options: true
    - name: batch-size
      display-name: "Batch size(default 10000)"
      placeholder: 10000
      default: "10000"
      type: integer
      visible-if:
          advanced-options: true
#    - merge:
#        - additional-options
#        - placeholder: "connection_timeout=1000&socket_timeout=300000"
    - default-advanced-options
  connection-properties-include-tunnel-config: true
init:
  - step: load-namespace
    namespace: metabase.driver.impala
  - step: register-jdbc-driver
    class: com.cloudera.impala.jdbc.Driver
