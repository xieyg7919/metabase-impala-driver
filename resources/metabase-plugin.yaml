info:
  name: Metabase Impala Driver
  version: 1.0.0
  description: Allows Metabase to connect to Impala databases.
#contact-info:
#  name: Impala
#  address: https://github.com/ClickHouse/metabase-clickhouse-driver
driver:
  name: impala
  display-name: Apache Impala
  lazy-load: true
  parent: sql-jdbc
  connection-properties:
    - host
    - merge:
        - port
        - default: 21050
    - name: user
      display-name: Username
      required: false
    - name: password
      display-name: Password
      required: false
    - name: dbname
      display-name: Databases
      placeholder: default
      helper-text: "To specify multiple databases, separate them by the space symbol. For example: default data logs."
    - name: scan-all-databases
      display-name: Scan all databases
      type: boolean
      default: false
      description: Scan all tables from all available ClickHouse databases except the system ones.

    - ssl
    - ssh-tunnel
    - advanced-options-start
    - name: use-no-proxy
      display-name: Disable system wide proxy settings
      default: false
      type: boolean
      visible-if:
        advanced-options: true
    - name: max-open-connections
      display-name: "Max open HTTP connections in the JDBC driver (default: 100)"
      placeholder: 100
      visible-if:
        advanced-options: true
    - merge:
        - additional-options
        - placeholder: "connection_timeout=1000&socket_timeout=300000"
    - default-advanced-options
  connection-properties-include-tunnel-config: true
init:
  - step: load-namespace
    namespace: metabase.driver.impala
  - step: register-jdbc-driver
    class: com.cloudera.impala.jdbc.Driver
